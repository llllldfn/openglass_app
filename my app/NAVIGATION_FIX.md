# 导航栏重复问题修复

## 问题描述
用户反映界面顶部有两层导航栏，造成界面混乱和重复控制。

## 问题原因
之前的实现中同时显示了两个控制栏：
1. `TopNavigationBar` - 包含设置、相机、语音输入、朗读开关
2. `DeviceControlPanel` - 包含设备控制标题、相机、麦克风、蓝牙开关

这导致了界面顶部出现重复的控制元素。

## 修复方案

### 1. 合并控制栏
将两个控制栏合并为一个统一的 `UnifiedTopControlBar`：
- 保留"设备控制"标题
- 整合所有控制开关到一行
- 设置按钮移到标题行右侧

### 2. 统一布局
```kotlin
UnifiedTopControlBar(
    // 标题行：设备控制 + 设置按钮
    // 控制行：相机 + 语音输入 + 朗读 + 蓝牙
)
```

### 3. 优化设计
- **标题行**: "设备控制"标题 + 设置按钮
- **控制行**: 四个开关水平排列，均匀分布
- **视觉统一**: 所有开关使用相同的样式和颜色

## 修复效果

### 修复前
```
┌─────────────────────────────────┐
│ 设置 [相机] [语音] [朗读]        │  ← TopNavigationBar
└─────────────────────────────────┘
┌─────────────────────────────────┐
│ 设备控制                        │  ← DeviceControlPanel
│ [相机] [麦克风] [蓝牙]           │
└─────────────────────────────────┘
```

### 修复后
```
┌─────────────────────────────────┐
│ 设备控制                    [设置] │  ← UnifiedTopControlBar
│ [相机] [语音] [朗读] [蓝牙]      │
└─────────────────────────────────┘
```

## 功能保持

修复后所有功能完全保持：
- ✅ 相机开关控制
- ✅ 语音输入开关
- ✅ TTS朗读开关
- ✅ 蓝牙开关
- ✅ 设置按钮
- ✅ 权限状态显示
- ✅ 开关状态同步

## 用户体验改进

1. **界面简洁**: 消除了重复的控制元素
2. **布局清晰**: 标题和控制开关层次分明
3. **操作便捷**: 所有控制集中在一个区域
4. **视觉统一**: 一致的样式和颜色方案

## 技术实现

### 1. 组件合并
- 删除 `TopNavigationBar` 和 `DeviceControlPanel`
- 创建新的 `UnifiedTopControlBar`

### 2. 布局优化
- 使用 `Column` 布局，标题行 + 控制行
- 标题行使用 `SpaceBetween` 排列
- 控制行使用 `SpaceEvenly` 均匀分布

### 3. 状态管理
- 统一传递所有必要的状态和回调
- 保持与 `ChatViewModel` 的完整集成

## 总结

通过这次修复，界面顶部不再有重复的导航栏，所有控制功能整合在一个统一、简洁的控制栏中，提供了更好的用户体验。
